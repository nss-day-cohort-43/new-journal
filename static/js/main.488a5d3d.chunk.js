(this["webpackJsonpnew-journal"]=this["webpackJsonpnew-journal"]||[]).push([[0],{46:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(3),s=n(2),a=n.n(s),c=n(37),i=n.n(c),o=(n(46),n(19)),j=n(11),l=n(13),d=n(58),u=n(17),b=(n(47),Object(s.createContext)()),h=function(e){var t=sessionStorage.getItem("userProfile"),n=Object(s.useState)(null!=t),a=Object(l.a)(n,2),c=a[0],i=a[1],o=Object(s.useState)(!1),j=Object(l.a)(o,2),h=j[0],O=j[1],x=new u.a.auth.GoogleAuthProvider;Object(s.useEffect)((function(){u.a.auth().onAuthStateChanged((function(e){O(!0)}))}),[]);return Object(r.jsx)(b.Provider,{value:{isLoggedIn:c,login:function(e,t){return u.a.auth().signInWithEmailAndPassword(e,t).then((function(e){sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))},logout:function(){return u.a.auth().signOut().then((function(){sessionStorage.clear(),i(!1)}))},register:function(e,t){return u.a.auth().createUserWithEmailAndPassword(e.email,t).then((function(e){console.log("savedU",e),sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))},signInWithGoogle:function(){return u.a.auth().signInWithPopup(x).then((function(e){console.log("savedU",e),sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))}},children:h?e.children:Object(r.jsx)(d.a,{className:"app-spinner dark"})})},O=n(63),x=n(62);function f(){var e=Object(j.g)(),t=Object(s.useContext)(b).login,n=Object(s.useContext)(b).signInWithGoogle,a=Object(s.useState)(),c=Object(l.a)(a,2),i=c[0],d=c[1],u=Object(s.useState)(),h=Object(l.a)(u,2),f=h[0],g=h[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Login To View Your List"}),Object(r.jsxs)("div",{className:"login-options",children:[Object(r.jsx)("div",{className:"border-option",children:Object(r.jsx)(O.a,{onClick:function(){n().then((function(t){return e.push("/")}))},variant:"outline-primary",children:"Login With Google"})}),Object(r.jsx)(x.a,{onSubmit:function(n){n.preventDefault(),t(i,f).then((function(){return e.push("/")})).catch((function(){return alert("Invalid email or password")}))},className:"border-option",children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("h5",{children:"or Login with Email and Password"}),Object(r.jsxs)(x.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(x.a.Label,{children:"Email address"}),Object(r.jsx)(x.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return d(e.target.value)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return g(e.target.value)}})]}),Object(r.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),Object(r.jsxs)("em",{children:["No account? ",Object(r.jsx)(o.b,{to:"register",children:"Sign Up With Email and Password"})]})]})]})})]})]})}function g(){var e=Object(j.g)(),t=Object(s.useContext)(b).register,n=Object(s.useState)(),a=Object(l.a)(n,2),c=a[0],i=a[1],d=Object(s.useState)(),u=Object(l.a)(d,2),h=u[0],f=u[1],g=Object(s.useState)(),p=Object(l.a)(g,2),m=p[0],v=p[1],S=Object(s.useState)(),C=Object(l.a)(S,2),w=C[0],L=C[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Register To Start Your Christmas List"}),Object(r.jsx)("div",{className:"login-options",children:Object(r.jsxs)("div",{className:"border-option",children:[Object(r.jsx)(x.a,{onSubmit:function(n){(n.preventDefault(),m&&m!==w)?alert("Passwords don't match. Do better."):t({name:c,email:h},m).then((function(){return e.push("/")}))},children:Object(r.jsxs)("fieldset",{children:[Object(r.jsxs)(x.a.Group,{children:[Object(r.jsx)(x.a.Label,{children:"Name"}),Object(r.jsx)(x.a.Control,{id:"name",type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"email",children:[Object(r.jsx)(x.a.Label,{children:"Email"}),Object(r.jsx)(x.a.Control,{type:"text",onChange:function(e){return f(e.target.value)}}),Object(r.jsx)(x.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(r.jsxs)(x.a.Group,{controlId:"password",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{type:"password",onChange:function(e){return v(e.target.value)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"confirmPassword",children:[Object(r.jsx)(x.a.Label,{children:"Confirm Password"}),Object(r.jsx)(x.a.Control,{type:"password",onChange:function(e){return L(e.target.value)}})]}),Object(r.jsx)(O.a,{variant:"primary",type:"submit",children:"Register"})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),Object(r.jsxs)("em",{children:["Already have an account? ",Object(r.jsx)(o.b,{to:"login",children:"Login"})]})]})]})})]})}var p=n(59),m=n(60),v=n(40),S="https://christmasjournal-d3efa.firebaseio.com",C=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){(console.log("auth",u.a.auth()),fetch("".concat(S,"/christList.json")).then((function(e){return e.json()}))).then((function(e){console.log("data",e);var t=Object.keys(e).map((function(t,n){return e[t].fbid=t,e[t]}));console.log("newArray",t),a(t)}))}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h4",{children:"Christmas List"}),Object(r.jsx)(p.a,{fluid:!0,children:Object(r.jsx)(m.a,{children:n.map((function(e){return Object(r.jsx)(v.a,{className:"bgcolor",xs:12,md:6,lg:4,xl:2,children:Object(r.jsx)("h5",{children:e.title})},e.fbid)}))})})]})},w=n(32),L=n(31),y=n(61),I=n(39),P=function(){var e=Object(s.useState)({}),t=Object(l.a)(e,2),n=t[0],a=(t[1],Object(j.g)());console.log("current user uid",L.a.auth().currentUser.uid);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h4",{children:"Add To My Christmas List"}),Object(r.jsxs)(x.a,{children:[Object(r.jsxs)(x.a.Group,{controlId:"title",children:[Object(r.jsx)(x.a.Label,{children:"Title"}),Object(r.jsx)(x.a.Control,{type:"text",placeholder:"Name of item"})]}),Object(r.jsxs)(x.a.Group,{controlId:"formGroupPassword",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{type:"text",placeholder:"Password"})]}),Object(r.jsxs)(y.a,{children:[Object(r.jsx)(y.a.Prepend,{children:Object(r.jsx)(y.a.Text,{children:"With textarea"})}),Object(r.jsx)(I.a,{as:"textarea","aria-label":"With textarea"})]}),Object(r.jsx)(O.a,{onClick:function(e){var t=Object(w.a)({},n);t.uid=L.a.auth().currentUser.uid,t.timestamp=Date.now(),function(e){return fetch("".concat(S,"/christList.json"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(n).then((function(e){return a.push("/")}))},children:"Add To List"})]})]})};function E(){var e=Object(s.useContext)(b).isLoggedIn;return Object(r.jsxs)("main",{children:[console.log("process.env.PUBLIC_URL",Object({NODE_ENV:"production",PUBLIC_URL:"/new-journal",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})),Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,children:e?Object(r.jsx)(C,{}):Object(r.jsx)(j.a,{to:"/login"})}),Object(r.jsx)(j.b,{path:"/add",children:e?Object(r.jsx)(P,{}):Object(r.jsx)(j.a,{to:"/login"})}),Object(r.jsx)(j.b,{path:"/login",children:Object(r.jsx)(f,{})}),Object(r.jsx)(j.b,{path:"/register",children:Object(r.jsx)(g,{})})]})]})}var N=function(){var e=Object(s.useContext)(b),t=e.isLoggedIn,n=e.logout;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"header-nav",children:t?Object(r.jsx)(O.a,{onClick:n,variant:"outline-dark",size:"sm",children:"Logout"}):null})})};var T=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"All I want for Christmas..."}),Object(r.jsx)(o.a,{children:Object(r.jsxs)(h,{children:[Object(r.jsx)(N,{}),Object(r.jsx)(E,{})]})})]})};n(56);u.a.initializeApp({apiKey:"AIzaSyCBRUk2LvEfwdOwCbj2E7WwrDNBARaIGKY",authDomain:"christmasjournal-d3efa.firebaseapp.com",databaseURL:"https://christmasjournal-d3efa.firebaseio.com",projectId:"christmasjournal-d3efa",storageBucket:"christmasjournal-d3efa.appspot.com",messagingSenderId:"355617880647",appId:"1:355617880647:web:5c1babbb8fd8f74f0fcf62"});var A=u.a.auth();console.log("auth",A),i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.488a5d3d.chunk.js.map